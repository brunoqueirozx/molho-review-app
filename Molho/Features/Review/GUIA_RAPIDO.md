# âš¡ Guia RÃ¡pido - Sistema de AvaliaÃ§Ãµes

## ğŸ¯ O Que Foi Criado?

Um sistema completo para usuÃ¡rios avaliarem estabelecimentos com **estrelas** (1-5) e **comentÃ¡rios opcionais**.

## ğŸ“± Como Usar

### 1ï¸âƒ£ Adicionar AvaliaÃ§Ã£o

**Passo a Passo:**
```
1. Abra um estabelecimento na tela principal
2. Clique no Ã­cone â­ (estrela) no topo da tela
3. Um bottomSheet vai abrir com o tÃ­tulo "Avaliar [Nome do Estabelecimento]"
4. Selecione de 1 a 5 estrelas
5. (Opcional) Escreva um comentÃ¡rio
6. Clique em "Enviar avaliaÃ§Ã£o"
7. Pronto! âœ…
```

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Avaliar Restaurante ABC    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Qual sua avaliaÃ§Ã£o?        â”‚
â”‚                             â”‚
â”‚  â­ â­ â­ â­ â­              â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ComentÃ¡rio (opcional)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Compartilhe sua     â”‚   â”‚
â”‚  â”‚ experiÃªncia...      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Enviar avaliaÃ§Ã£o] ğŸŸ¢     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ Editar AvaliaÃ§Ã£o

**Quando vocÃª jÃ¡ avaliou:**
```
1. Clique no Ã­cone â­ novamente
2. Suas estrelas e comentÃ¡rio jÃ¡ estarÃ£o preenchidos
3. Altere o que quiser
4. Clique em "Atualizar avaliaÃ§Ã£o"
5. Ou clique em "Remover avaliaÃ§Ã£o" para deletar
```

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Avaliar Restaurante ABC    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Editar sua avaliaÃ§Ã£o       â”‚
â”‚                             â”‚
â”‚  â­ â­ â­ â­ â˜†              â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ComentÃ¡rio (opcional)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ã“timo lugar!        â”‚   â”‚
â”‚  â”‚                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Atualizar avaliaÃ§Ã£o] ğŸŸ¢  â”‚
â”‚  [Remover avaliaÃ§Ã£o] ğŸ”´    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Ver Todas as AvaliaÃ§Ãµes

**Passo a Passo:**
```
1. Na tela do estabelecimento
2. Veja as mÃ©tricas: â­ 4.5  ğŸ’¬ 127
3. Clique no Ã­cone ğŸ’¬ (nÃºmero de avaliaÃ§Ãµes)
4. Uma nova tela abre com todas as avaliaÃ§Ãµes
5. Pull down para atualizar
```

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      AvaliaÃ§Ãµes        [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚      4.5 â­â­â­â­â­  â”‚  â”‚
â”‚   â”‚   127 avaliaÃ§Ãµes    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ JoÃ£o Silva              â”‚
â”‚  â­â­â­â­â­                  â”‚
â”‚  hÃ¡ 2 dias                  â”‚
â”‚  "Excelente! Voltarei..."   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ Maria Santos            â”‚
â”‚  â­â­â­â­â˜†                  â”‚
â”‚  hÃ¡ 1 semana                â”‚
â”‚  "Muito bom, mas..."        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—‚ï¸ Arquivos Importantes

### Modelos
- `Review.swift` - Estrutura da avaliaÃ§Ã£o

### RepositÃ³rios
- `ReviewRepository.swift` - Interface
- `FirebaseReviewRepository.swift` - ImplementaÃ§Ã£o Firebase

### Views
- `AddReviewView.swift` - Adicionar/Editar
- `ReviewsListView.swift` - Listar todas

### ViewModels
- `AddReviewViewModel.swift` - LÃ³gica de adicionar
- `ReviewsListViewModel.swift` - LÃ³gica de listar

## ğŸ”§ ConfiguraÃ§Ã£o NecessÃ¡ria

### Firebase
1. Acesse o Console do Firebase
2. Crie a coleÃ§Ã£o `reviews`
3. Configure Ã­ndices (ver `FIREBASE_SETUP.md`)
4. Configure regras de seguranÃ§a

### Xcode
âœ… Nenhuma configuraÃ§Ã£o adicional necessÃ¡ria
âœ… JÃ¡ integrado com MerchantSheetView
âœ… Usa AuthenticationManager existente

## âš™ï¸ Funcionalidades AutomÃ¡ticas

### âœ… O Sistema Faz Sozinho:

1. **Detecta se vocÃª jÃ¡ avaliou**
   - Carrega sua avaliaÃ§Ã£o automaticamente
   - Muda interface para modo "editar"

2. **Atualiza mÃ©tricas do estabelecimento**
   - Calcula mÃ©dia de estrelas
   - Conta total de avaliaÃ§Ãµes
   - Atualiza na tela automaticamente

3. **Valida dados**
   - Garante que estrelas estÃ£o entre 1-5
   - Verifica se usuÃ¡rio estÃ¡ logado
   - Mostra erros se algo der errado

4. **Feedback visual**
   - Loading ao enviar
   - Mensagem de sucesso
   - Mensagem de erro
   - Fecha automaticamente apÃ³s sucesso

## ğŸ¨ Design

### Cores
- **Verde**: BotÃµes de aÃ§Ã£o positiva
- **Vermelho**: BotÃ£o de deletar
- **Ouro**: Estrelas selecionadas
- **Cinza**: Estrelas nÃ£o selecionadas

### AnimaÃ§Ãµes
- âš¡ Spring animation ao selecionar estrelas
- ğŸ”„ Pull-to-refresh na lista
- âœ¨ Feedback visual em botÃµes

## ğŸ› SoluÃ§Ã£o de Problemas

### "Erro ao enviar avaliaÃ§Ã£o"
**Causas possÃ­veis:**
- Sem conexÃ£o com internet
- Firebase nÃ£o configurado
- Regras de seguranÃ§a incorretas
- UsuÃ¡rio nÃ£o autenticado

**SoluÃ§Ã£o:**
1. Verifique conexÃ£o
2. Confira Firebase Console
3. Veja logs no Xcode (prints detalhados)

### "Nenhuma avaliaÃ§Ã£o ainda"
**Causas:**
- Estabelecimento nÃ£o tem avaliaÃ§Ãµes
- Filtros do Firebase bloqueando
- Ãndices nÃ£o criados

**SoluÃ§Ã£o:**
1. Adicione uma avaliaÃ§Ã£o de teste
2. Verifique Ã­ndices no Firebase

### Estrelas nÃ£o aparecem douradas
**Causa:** Problema no SF Symbols

**SoluÃ§Ã£o:**
- JÃ¡ implementado com fallback
- Deve funcionar normalmente

## ğŸ“Š O Que Acontece no Firebase

### Quando vocÃª avalia:
```
1. Cria documento em reviews/
   â””â”€â”€ {uuid}/
       â”œâ”€â”€ rating: 5
       â”œâ”€â”€ comment: "Ã“timo!"
       â”œâ”€â”€ merchantId: "abc123"
       â”œâ”€â”€ userId: "xyz789"
       â””â”€â”€ createdAt: timestamp

2. Atualiza merchants/abc123/
   â”œâ”€â”€ publicRating: 4.5 (recalculado)
   â””â”€â”€ reviewsCount: 128 (incrementado)
```

## ğŸ“ˆ MÃ©tricas

O sistema rastreia:
- â­ **MÃ©dia de avaliaÃ§Ãµes** (publicRating)
- ğŸ’¬ **Total de avaliaÃ§Ãµes** (reviewsCount)
- ğŸ‘¤ **Quem avaliou** (userId, userName)
- ğŸ“… **Quando avaliou** (createdAt)
- ğŸ”„ **Ãšltima atualizaÃ§Ã£o** (updatedAt)

## ğŸš€ PrÃ³ximos Passos

### VocÃª pode adicionar:
- [ ] Fotos nas avaliaÃ§Ãµes
- [ ] Filtros por estrelas (5â­ apenas)
- [ ] Sistema de "Ãºtil" em reviews
- [ ] Resposta do estabelecimento
- [ ] PaginaÃ§Ã£o (carregar mais)

### DocumentaÃ§Ã£o Completa:
- `README.md` - VisÃ£o geral
- `FIREBASE_SETUP.md` - ConfiguraÃ§Ã£o Firebase
- `ARQUITETURA.md` - Estrutura tÃ©cnica
- `IMPLEMENTACAO_COMPLETA.md` - Status final

## âœ… Checklist de ImplementaÃ§Ã£o

- [x] Modelo de dados (Review)
- [x] RepositÃ³rio Firebase
- [x] View de adicionar/editar
- [x] View de listar
- [x] ViewModels
- [x] IntegraÃ§Ã£o com MerchantSheet
- [x] AtualizaÃ§Ã£o automÃ¡tica de mÃ©tricas
- [x] ValidaÃ§Ãµes
- [x] Feedback visual
- [x] DocumentaÃ§Ã£o completa

## ğŸ‰ Status

**âœ… TUDO PRONTO PARA USAR!**

O sistema estÃ¡ completamente funcional. Basta configurar o Firebase e comeÃ§ar a usar!

---

**DÃºvidas?** Consulte os outros arquivos de documentaÃ§Ã£o na pasta `Features/Review/`.

